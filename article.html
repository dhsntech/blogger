<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文章標題</title> <!-- 標題會動態設置 -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<header>
    <h1>我的部落格</h1>
    <nav>
        <ul>
            <li><a href="index.html">首頁</a></li>
            <li><a href="#">關於我</a></li>
            <li><a href="#">聯絡我</a></li>
        </ul>
    </nav>
</header>

<main>
    <article id="article-content">
        <!-- 文章內容會由 JavaScript 自動加載 -->
        <h2 id="article-title">文章標題</h2>
        <img id="article-image" src="#" alt="文章圖片" style="display: none;">
        <div id="article-intro">
            <p>文章簡介會顯示在這裡...</p>
        </div>
        <div id="article-body">
            <p>正在加載文章...</p>
        </div>
    </article>
</main>

<footer>
    <p class="footer-text">SNTH版權所有</p>
</footer>

<script>
// 從 URL 取得文章的 file 參數
const params = new URLSearchParams(window.location.search);
const articleFile = params.get('file');

document.addEventListener("DOMContentLoaded", () => {
    // 如果有指定的檔案名稱，載入對應的文章
    if (articleFile) {
        fetch('articles.json')
            .then(response => response.json())
            .then(articles => {
                const article = articles.find(a => a.file === articleFile);

                if (article) {
                    // 設置頁面標題
                    document.title = article.title;
                    document.getElementById("article-title").textContent = article.title;

                    // 顯示文章簡介
                    document.getElementById("article-intro").innerHTML = `<p>${article.intro}</p>`;

                    // 顯示文章圖片（如果有）
                    if (article.image) {
                        const articleImage = document.getElementById("article-image");
                        articleImage.src = article.image;
                        articleImage.alt = article.title;
                        articleImage.style.display = "block";
                    }

                    // 加載文章正文（這裡假設每篇文章都有一個對應的 Markdown 文件）
                    fetch(`articles/${article.file}.md`)
                        .then(response => response.text())
                        .then(markdown => {
                            const md = window.markdownit();
                            document.getElementById("article-body").innerHTML = md.render(markdown);
                        })
                        .catch(error => {
                            document.getElementById("article-body").innerHTML = "<p>無法加載文章內容，請稍後再試。</p>";
                        });
                } else {
                    document.getElementById("article-body").innerHTML = "<p>文章未找到。</p>";
                }
            })
            .catch(error => {
                console.error('Error fetching the article:', error);
                document.getElementById("article-body").innerHTML = "<p>無法加載文章內容，請稍後再試。</p>";
            });
    } else {
        document.getElementById("article-body").innerHTML = "<p>未指定文章檔案。</p>";
    }
});
</script>

</body>
</html>
